---
title: "Basic Workflow"
description: "Complete example of adding, versioning, and deploying a component"
---

> **Product**: Edgit
> **Version**: v1.0.0
> **Last Updated**: 2025-11-01

## Overview

This example demonstrates a complete Edgit workflow from initializing a repository to deploying a component to production.

## Prerequisites

- Edgit installed globally: `npm install -g @ensemble/edgit`
- Git installed and configured
- OpenAI API key (optional, for AI features)

## Step 1: Initialize Repository

Create a new project and initialize Edgit:

```bash
# Create project directory
mkdir my-functions && cd my-functions

# Initialize Git
edgit init
edgit config user.name "Your Name"
edgit config user.email "your@email.com"

# Initialize Edgit
edgit init
```

**Output**:
```
âœ… Edgit initialized in /path/to/my-functions
ðŸ“ Created .edgit/components.json
```

**File structure**:
```
my-functions/
â”œâ”€â”€ .git/
â””â”€â”€ .edgit/
    â””â”€â”€ components.json
```

## Step 2: Create a Function

Create a simple email validation function:

```typescript
// src/validators/email.ts
export interface EmailValidationResult {
  valid: boolean;
  reason?: string;
}

export function validateEmail(email: string): EmailValidationResult {
  // Basic email validation
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  if (!email) {
    return { valid: false, reason: 'Email is required' };
  }

  if (!emailRegex.test(email)) {
    return { valid: false, reason: 'Invalid email format' };
  }

  return { valid: true };
}

// Example usage
if (require.main === module) {
  console.log(validateEmail('test@example.com'));
  // { valid: true }

  console.log(validateEmail('invalid-email'));
  // { valid: false, reason: 'Invalid email format' }
}
```

**File structure**:
```
my-functions/
â”œâ”€â”€ .git/
â”œâ”€â”€ .edgit/
â”‚   â””â”€â”€ components.json
â””â”€â”€ src/
    â””â”€â”€ validators/
        â””â”€â”€ email.ts
```

## Step 3: Register the Component

Add the function to Edgit's component registry:

```bash
edgit add function email-validator src/validators/email.ts \
  --description "Validates email addresses using regex"
```

**Output**:
```
âœ… Added component: email-validator (function)
   Path: src/validators/email.ts
   Description: Validates email addresses using regex
```

**Updated registry** (`.edgit/components.json`):
```json
{
  "version": "1.0",
  "components": {
    "functions": {
      "email-validator": {
        "type": "function",
        "path": "src/validators/email.ts",
        "description": "Validates email addresses using regex"
      }
    }
  }
}
```

## Step 4: Commit Changes

Stage files and commit with AI-generated message:

```bash
# Stage all changes
edgit add .

# Let AI generate commit message
edgit commit
```

**AI analyzes the changes and generates**:
```
ðŸ“ AI generated message: "feat(email-validator): add email validation function"
âœ… Committed: feat(email-validator): add email validation function
```

**Or provide manual message**:
```bash
edgit commit -m "feat: add email validator with regex matching"
```

## Step 5: Create Initial Version

Tag the first version:

```bash
edgit tag email-validator v1.0.0
```

**Output**:
```
âœ… Created tag: email-validator-v1.0.0
   Component: email-validator
   Version: v1.0.0
   Commit: abc1234 feat(email-validator): add email validation function
```

**Git tags**:
```bash
git tag
# email-validator-v1.0.0
```

## Step 6: Push to Remote

Create a remote repository and push:

```bash
# Add remote (replace with your repository URL)
edgit remote add origin git@github.com:username/my-functions.git

# Push code and tags
edgit push -u origin main
edgit push origin --tags
```

**Output**:
```
To github.com:username/my-functions.git
 * [new branch]      main -> main
 * [new tag]         email-validator-v1.0.0 -> email-validator-v1.0.0
```

## Step 7: Deploy to Staging

Mark version as deployed to staging:

```bash
edgit deploy email-validator v1.0.0 --to staging
```

**Output**:
```
âœ… Deployed email-validator v1.0.0 to staging
   Timestamp: 2025-11-01 10:00:00
```

## Step 8: Make Improvements

Add enhanced validation with domain checking:

```typescript
// src/validators/email.ts (updated)
export interface EmailValidationResult {
  valid: boolean;
  reason?: string;
}

// Common invalid domains to reject
const INVALID_DOMAINS = ['example.com', 'test.com', 'localhost'];

export function validateEmail(email: string): EmailValidationResult {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

  if (!email) {
    return { valid: false, reason: 'Email is required' };
  }

  if (!emailRegex.test(email)) {
    return { valid: false, reason: 'Invalid email format' };
  }

  // Check for invalid domains
  const domain = email.split('@')[1].toLowerCase();
  if (INVALID_DOMAINS.includes(domain)) {
    return { valid: false, reason: 'Invalid email domain' };
  }

  return { valid: true };
}
```

Commit the update:

```bash
edgit add src/validators/email.ts
edgit commit
# AI: "feat(email-validator): add domain validation"
```

## Step 9: Create Patch Version

Tag the improvement as a minor version:

```bash
edgit tag email-validator v1.1.0
edgit push origin email-validator-v1.1.0
```

## Step 10: Deploy to Production

After testing in staging, deploy to production:

```bash
# Deploy v1.1.0 to production
edgit deploy email-validator v1.1.0 --to production \
  --metadata '{"deployer":"alice","ticket":"PROJ-123"}'
```

**Output**:
```
âœ… Deployed email-validator v1.1.0 to production
   Timestamp: 2025-11-01 14:30:00
   Metadata: {"deployer":"alice","ticket":"PROJ-123"}
```

## Step 11: Check Status

View current deployment status:

```bash
edgit status email-validator
```

**Output**:
```
Component: email-validator (function)
Path: src/validators/email.ts
Description: Validates email addresses using regex
Latest version: v1.1.0

Versions:
  v1.1.0 (2025-11-01 12:00) - feat: add domain validation
  v1.0.0 (2025-11-01 10:00) - feat: add email validation function

Deployments:
  staging: v1.0.0 (deployed 2025-11-01 10:00:00)
  production: v1.1.0 (deployed 2025-11-01 14:30:00)
```

## Step 12: View Component Details

List all components and view details:

```bash
# List all components
edgit components list
```

**Output**:
```
Type      Name              Path                        Description
function  email-validator   src/validators/email.ts     Validates email addresses...
```

```bash
# View detailed history
edgit components show email-validator --versions --deployments
```

## Complete Command Summary

Here's the complete sequence of commands:

```bash
# 1. Setup
mkdir my-functions && cd my-functions
edgit init

# 2. Create function
mkdir -p src/validators
cat > src/validators/email.ts << 'EOF'
export function validateEmail(email: string) {
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  return emailRegex.test(email);
}
EOF

# 3. Register and commit
edgit add function email-validator src/validators/email.ts \
  --description "Validates email addresses"
edgit add .
edgit commit  # AI generates message

# 4. Version and push
edgit tag email-validator v1.0.0
edgit remote add origin git@github.com:username/my-functions.git
edgit push -u origin main --tags

# 5. Deploy
edgit deploy email-validator v1.0.0 --to staging
edgit deploy email-validator v1.0.0 --to production

# 6. Check status
edgit status email-validator
```

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Advanced Workflows"
    icon="network-wired"
    href="/edgit/examples/monorepo-workflow"
  >
    Managing multiple components in a monorepo
  </Card>

  <Card
    title="CI/CD Integration"
    icon="gears"
    href="/edgit/examples/cicd-integration"
  >
    Automate versioning and deployment
  </Card>

  <Card
    title="Component Dependencies"
    icon="link"
    href="/edgit/guides/dependencies"
  >
    Track relationships between components
  </Card>

  <Card
    title="CLI Reference"
    icon="terminal"
    href="/edgit/api-reference/cli"
  >
    Complete command documentation
  </Card>
</CardGroup>
