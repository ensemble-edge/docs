---
title: "CLI Commands"
description: "Conductor command line reference"
---

# CLI Commands Reference

**Complete reference for the Conductor CLI.**

## Installation

The recommended way to use Conductor is through the unified Ensemble CLI:

```bash
# Recommended: Unified CLI (includes all tools)
pnpm add -g @ensemble-edge/ensemble

# Alternative: Direct installation
pnpm add -g @ensemble-edge/conductor
```

## Usage

Commands can be run through either the unified CLI or directly:

```bash
# Via unified CLI (recommended)
ensemble conductor init my-project
ensemble conductor dev

# Direct (alternative)
conductor init my-project
conductor dev
```

<Note>
All examples below show the direct `conductor` command. Prefix with `ensemble` when using the unified CLI.
</Note>

## Global Commands

### init

Initialize a new Conductor project.

```bash
conductor init [project-name]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--template <template>` | Use a template (basic, api, rag, chatbot) |
| `--typescript` | Use TypeScript |
| `--no-git` | Skip git initialization |
| `--skip-auth` | Skip Wrangler authentication check |
| `--skip-secrets` | Skip AI provider setup |
| `--provider <name>` | Pre-select AI provider (anthropic, openai, cloudflare) |

**Examples:**

```bash
# Basic initialization
conductor init my-project

# With template
conductor init my-project --template rag

# With AI provider pre-selected
conductor init my-project --provider anthropic

# CI/CD mode (no prompts)
conductor init my-project --skip-auth --skip-secrets
```

**What init does:**

1. Creates project directory structure
2. Checks Wrangler authentication (unless `--skip-auth`)
3. Sets up AI provider and stores API key (unless `--skip-secrets`)
4. Installs dependencies
5. Provides next steps

### dev

Start local development server.

```bash
conductor dev
```

Options:
- `--port <port>` - Port number (default: 3000)
- `--host <host>` - Host address (default: localhost)

Example:
```bash
conductor dev --port 8080
```

### deploy

Deploy to Cloudflare Workers.

```bash
conductor deploy [environment]
```

Options:
- `--env <environment>` - Environment name (default: production)
- `--dry-run` - Show what would be deployed

Example:
```bash
conductor deploy --env staging
```

### test

Run tests.

```bash
conductor test [pattern]
```

Options:
- `--watch` - Watch mode
- `--coverage` - Generate coverage report
- `--verbose` - Verbose output

Example:
```bash
conductor test --coverage
```

### build

Execute all build triggers in the project. Build triggers run at build time to generate static assets like documentation, OpenAPI specs, or pre-rendered pages.

```bash
conductor build
```

Options:
- `--env <environment>` - Target environment (default: production)
- `--output <path>` - Override output directory
- `--verbose` - Verbose output

Example:
```bash
conductor build --env staging --verbose
```

**What it does:**
- Finds all ensembles with `type: build` triggers
- Executes them sequentially
- Outputs generated files to configured directories
- Reports build status and timing

**Common Use Cases:**
- `conductor build` before deployment (CI/CD)
- Generate OpenAPI documentation
- Pre-render static pages
- Build search indexes

### run

Execute a CLI trigger by command name. CLI triggers are custom commands defined in ensemble YAML files.

```bash
conductor run <command> [options]
```

**Arguments:**

| Argument | Description |
|----------|-------------|
| `command` | Name of the CLI command to run (from `trigger.command`) |

**Options:**

Options are defined in the ensemble's CLI trigger configuration. They can be:
- `--<option-name> <value>` - For string/number options
- `--<flag-name>` - For boolean flags
- Multiple values supported for array options

Example:
```bash
# Run a CLI command with options
conductor run generate-docs --output ./docs --format markdown --verbose

# Run with required and optional parameters
conductor run import-data --file data.json --batch-size 100

# Boolean flags
conductor run deploy --dry-run --skip-tests
```

**Defining CLI Commands:**

```yaml
# ensembles/my-cli.yaml
ensemble: my-cli
trigger:
  - type: cli
    command: generate-docs
    description: Generate project documentation
    options:
      - name: output
        type: string
        required: true
        description: Output directory
      - name: format
        type: string
        default: markdown
        description: Output format (markdown, html, pdf)
      - name: verbose
        type: boolean
        default: false
        description: Enable verbose output

flow:
  - agent: docs-generator
    input:
      output: ${trigger.options.output}
      format: ${trigger.options.format}
      verbose: ${trigger.options.verbose}
```

**Listing Available Commands:**

```bash
conductor ensemble:list --type cli
```

## Validate Command

### validate

Validate ensemble and agent configuration files (YAML or TypeScript).

```bash
conductor validate [path] [options]
```

**Arguments:**

| Argument | Description |
|----------|-------------|
| `path` | Path to file or directory to validate (default: current directory) |

**Options:**

| Option | Description |
|--------|-------------|
| `--fix` | Automatically fix fixable issues |
| `-r, --recursive` | Recursively validate directories |
| `--strict` | Enable strict validation mode |
| `--format <format>` | Output format: `text`, `json` (default: `text`) |

**Supported File Types:**

- `.yaml`, `.yml` - YAML ensemble and agent definitions
- `.ts` - TypeScript agents and ensembles

**TypeScript Agent Validation:**

The validate command checks TypeScript agent files for:
- **Default export** - Must export a default handler function
- **Function signature** - Should accept `AgentExecutionContext`
- **Return type** - Should return a value or Promise

```bash
# Validate a TypeScript agent
conductor validate agents/my-agent/index.ts
```

Example output for common issues:

```
âœ— agents/my-agent/index.ts
  No default export found. TypeScript agents must export a default function:

  export default async function(context: AgentExecutionContext) {
    // your code here
  }
```

**Examples:**

```bash
# Validate current directory
conductor validate

# Validate specific file
conductor validate ensembles/workflow.yaml
conductor validate agents/custom-agent/index.ts

# Validate with auto-fix
conductor validate --fix

# Validate recursively with JSON output
conductor validate . -r --format json
```

---

## Bundle & Import Commands

### bundle

Export an ensemble or agent with all its dependencies into a portable archive.

```bash
conductor bundle <type> <name> [options]
```

**Arguments:**

| Argument | Description |
|----------|-------------|
| `type` | Type to bundle: `ensemble` or `agent` |
| `name` | Name of the ensemble or agent to bundle |

**Options:**

| Option | Description |
|--------|-------------|
| `-o, --output <path>` | Output file path |
| `--format <format>` | Archive format: `tar` (default) or `zip` |
| `--dry-run` | Preview what would be bundled |
| `--agents-dir <dir>` | Agents directory (default: `agents`) |
| `--ensembles-dir <dir>` | Ensembles directory (default: `ensembles`) |
| `--prompts-dir <dir>` | Prompts directory (default: `prompts`) |

**Examples:**

```bash
# Bundle an ensemble
conductor bundle ensemble my-workflow -o my-workflow.tar.gz

# Bundle an agent
conductor bundle agent company-enricher --format zip

# Preview bundle contents
conductor bundle ensemble rag-pipeline --dry-run
```

### import

Import a bundled ensemble or agent into the current project.

```bash
conductor import <bundle> [options]
```

**Arguments:**

| Argument | Description |
|----------|-------------|
| `bundle` | Path to bundle file (`.tar.gz` or `.zip`) |

**Options:**

| Option | Description |
|--------|-------------|
| `-f, --force` | Overwrite existing files without prompting |
| `-s, --skip` | Skip existing files without prompting |
| `--dry-run` | Preview import without writing files |
| `--target-dir <dir>` | Target directory (default: `.`) |
| `--ensembles-dir <dir>` | Ensembles directory (default: `ensembles`) |
| `--agents-dir <dir>` | Agents directory (default: `agents`) |
| `--prompts-dir <dir>` | Prompts directory (default: `prompts`) |

**Examples:**

```bash
# Import a bundle
conductor import ./my-workflow.tar.gz

# Preview import
conductor import ./shared-agent.zip --dry-run

# Force overwrite existing files
conductor import ./updated-workflow.tar.gz --force

# Skip conflicts
conductor import ./new-agents.tar.gz --skip
```

---

## Ensemble Commands

### ensemble:list

List all ensembles.

```bash
conductor ensemble:list
```

### ensemble:run

Execute an ensemble locally.

```bash
conductor ensemble:run <ensemble> [input]
```

Example:
```bash
conductor ensemble:run greet-user '{"name": "Alice"}'
```

### ensemble:validate

Validate ensemble YAML (legacy - prefer `conductor validate`).

```bash
conductor ensemble:validate <file>
```

Example:
```bash
conductor ensemble:validate ensembles/greet.yaml
```

## Agent Commands

### agent:list

List all agents.

```bash
conductor agent:list
```

### agent:run

Execute an agent locally.

```bash
conductor agent:run <agent> [input]
```

Example:
```bash
conductor agent:run company-enricher '{"company_name": "Anthropic"}'
```

### agent:validate

Validate agent YAML.

```bash
conductor agent:validate <file>
```

## Component Commands

### component:list

List all components.

```bash
conductor component:list
```

### component:create

Create a new component.

```bash
conductor component:create <name> --type <type>
```

Options:
- `--type <type>` - Component type (prompt, template, schema, config)
- `--version <version>` - Initial version (default: v1.0.0)

Example:
```bash
conductor component:create user-prompt --type prompt
```

## Edgit Commands

### edgit:init

Initialize Edgit in project.

```bash
conductor edgit:init
```

### edgit:status

Show Edgit status.

```bash
conductor edgit:status
```

### edgit:commit

Commit changes.

```bash
conductor edgit:commit -m "message"
```

### edgit:tag

Create version tag.

```bash
conductor edgit:tag <version>
```

Example:
```bash
conductor edgit:tag v1.2.0
```

### edgit:log

Show commit history.

```bash
conductor edgit:log [--limit <n>]
```

### edgit:diff

Show changes.

```bash
conductor edgit:diff [commit1] [commit2]
```

## Config Commands

### config:get

Get configuration value.

```bash
conductor config:get <key>
```

Example:
```bash
conductor config:get apiKey
```

### config:set

Set configuration value.

```bash
conductor config:set <key> <value>
```

Example:
```bash
conductor config:set apiKey sk-...
```

### config:list

List all configuration.

```bash
conductor config:list
```

## API Key Commands

Manage API keys for authentication. Keys are stored in Cloudflare KV.

### keys generate

Generate a new API key with optional scoped permissions.

```bash
conductor keys generate --name <name> [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--name <name>` | Human-readable name for the key (required) |
| `--permissions <perms>` | Comma-separated permissions (default: `*`) |
| `--expires <duration>` | Expiration: `30d`, `90d`, `1y`, `never` (default: `90d`) |
| `--user-id <userId>` | User/service ID this key belongs to |
| `--json` | Output as JSON |

**Examples:**

```bash
# Full access key
conductor keys generate --name "admin" --permissions "*"

# Scoped key for billing ensembles
conductor keys generate \
  --name "billing-service" \
  --permissions "ensemble:billing-*:execute,ensemble:invoice-*:execute" \
  --expires "90d"

# Key that never expires
conductor keys generate --name "internal" --permissions "*" --expires never
```

### keys list

List all API keys.

```bash
conductor keys list [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--json` | Output as JSON |

### keys revoke

Revoke an API key.

```bash
conductor keys revoke <keyId> [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--json` | Output as JSON |

### keys info

Show information about an API key.

```bash
conductor keys info <keyId> [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--json` | Output as JSON |

### keys rotate

Rotate an API key (generates new key, keeps metadata).

```bash
conductor keys rotate <keyId> [options]
```

**Options:**

| Option | Description |
|--------|-------------|
| `--json` | Output as JSON |

---

## Secrets Commands

### secret:set

Set a secret.

```bash
conductor secret:set <name> [value]
```

If value is omitted, prompts securely.

Example:
```bash
conductor secret:set OPENAI_API_KEY
```

### secret:list

List secret names (not values).

```bash
conductor secret:list
```

### secret:delete

Delete a secret.

```bash
conductor secret:delete <name>
```

## Database Commands

### db:create

Create D1 database.

```bash
conductor db:create <name>
```

### db:migrate

Run database migrations.

```bash
conductor db:migrate [--env <environment>]
```

### db:query

Execute SQL query.

```bash
conductor db:query <sql> [--env <environment>]
```

Example:
```bash
conductor db:query "SELECT * FROM users LIMIT 10"
```

## Storage Commands

### storage:create

Create KV namespace or R2 bucket.

```bash
conductor storage:create <type> <name>
```

Types: `kv`, `r2`, `vectorize`

Example:
```bash
conductor storage:create kv CACHE
```

### storage:list

List storage resources.

```bash
conductor storage:list <type>
```

## Logs Commands

### logs

Tail production logs.

```bash
conductor logs [--env <environment>] [--follow]
```

Options:
- `--env <environment>` - Environment name
- `--follow` - Follow logs in real-time
- `--filter <pattern>` - Filter by pattern

Example:
```bash
conductor logs --follow --filter error
```

## Info Commands

### info

Show project information.

```bash
conductor info
```

### version

Show CLI version.

```bash
conductor version
```

### help

Show help.

```bash
conductor help [command]
```

## Environment Management

### env:list

List environments.

```bash
conductor env:list
```

### env:create

Create environment.

```bash
conductor env:create <name>
```

### env:switch

Switch active environment.

```bash
conductor env:switch <name>
```

## Common Options

Most commands support these options:

- `--help` - Show help
- `--verbose` - Verbose output
- `--quiet` - Quiet output
- `--env <environment>` - Target environment
- `--config <path>` - Config file path

## Configuration File

Commands read from `conductor.config.js`:

```javascript
export default {
  name: 'my-project',
  environments: {
    production: {
      accountId: 'abc123...',
      bindings: {
        KV: 'namespace-id',
        DB: 'database-id'
      }
    },
    staging: {
      accountId: 'abc123...',
      bindings: {
        KV: 'staging-namespace-id',
        DB: 'staging-database-id'
      }
    }
  }
};
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Unified CLI" icon="terminal" href="/introduction/ensemble-cli">
    Full Ensemble CLI documentation
  </Card>
  <Card title="YAML Schema" icon="file-code" href="/conductor/reference/yaml-schema">
    YAML configuration reference
  </Card>
  <Card title="TypeScript API" icon="code" href="/conductor/reference/ts-schema">
    TypeScript API reference
  </Card>
  <Card title="Your First Project" icon="rocket" href="/conductor/getting-started/your-first-project">
    Get started
  </Card>
</CardGroup>
