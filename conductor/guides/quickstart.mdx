---
title: "Quickstart"
description: "Build your first Conductor workflow in 5 minutes"
---

## Hello World

Create your first ensemble workflow in three simple steps.

### 1. Create Ensemble File

```yaml
name: hello-world
description: My first Conductor ensemble

flow:
  - member: greet
    type: Think
    config:
      provider: cloudflare
      model: '@cf/meta/llama-3.1-8b-instruct'
    input:
      prompt: Say hello to ${input.name} in a friendly way

output:
  greeting: ${greet.output.text}
```

### 2. Test It

```bash
npx wrangler deploy
curl https://your-worker.workers.dev?name=World
```

**Response**:
```json
{
  "greeting": "Hello, World! Welcome to Conductor!"
}
```

## Adding Authentication

Conductor includes a built-in UnifiedRouter for securing your routes with multiple authentication methods.

### 1. Configure Authentication

Create `conductor.config.ts`:

```typescript
import type { ConductorConfig } from '@ensemble-edge/conductor';

const config: ConductorConfig = {
  routing: {
    auth: {
      // Type-specific defaults
      defaults: {
        pages: {
          requirement: 'required',
          methods: ['cookie'],
          onFailure: {
            action: 'redirect',
            redirectTo: '/login',
            preserveReturn: true
          }
        },
        api: {
          requirement: 'required',
          methods: ['bearer', 'apiKey']
        }
      },

      // Public routes
      rules: [
        { pattern: '/', auth: { requirement: 'public' } },
        { pattern: '/login', auth: { requirement: 'public' } }
      ]
    }
  }
};

export default config;
```

### 2. Setup KV Namespaces

In `wrangler.toml`:

```toml
[[kv_namespaces]]
binding = "API_KEYS"
id = "your-api-keys-kv-id"

[[kv_namespaces]]
binding = "SESSIONS"
id = "your-sessions-kv-id"
```

Create namespaces:
```bash
npx wrangler kv:namespace create API_KEYS
npx wrangler kv:namespace create SESSIONS
```

### 3. Set Secrets

```bash
# JWT secret for bearer tokens
npx wrangler secret put JWT_SECRET

# Session secret for cookies
npx wrangler secret put SESSION_SECRET
```

### 4. Secure a Page

Create `pages/dashboard/page.yaml`:

```yaml
name: dashboard
type: page
description: User dashboard (requires login)

route:
  path: /dashboard
  auth:
    requirement: required
    methods: [cookie]
    onFailure:
      action: redirect
      redirectTo: /login

renderMode: ssr
componentPath: ./component.tsx
```

### 5. Secure an API

Create `members/users-api.yaml`:

```yaml
name: users-api
type: api
description: User management API

route:
  path: /api/users
  methods: [GET, POST]
  auth:
    requirement: required
    methods: [bearer, apiKey]
    permissions: [users:read]

url: https://api.example.com/users
method: GET
```

### 6. Test Authentication

**With Bearer Token:**
```bash
curl -H "Authorization: Bearer your-jwt-token" \
  https://your-worker.workers.dev/api/users
```

**With API Key:**
```bash
curl -H "X-API-Key: your-api-key" \
  https://your-worker.workers.dev/api/users
```

**With Cookie (browser):**
```bash
# Login first to get session cookie
curl -X POST https://your-worker.workers.dev/login \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"password"}' \
  -c cookies.txt

# Use saved cookie
curl -b cookies.txt https://your-worker.workers.dev/dashboard
```

## Common Patterns

### Public Landing Page + Protected Dashboard

```typescript
// conductor.config.ts
routing: {
  auth: {
    defaults: {
      pages: {
        requirement: 'required',
        methods: ['cookie'],
        onFailure: {
          action: 'redirect',
          redirectTo: '/login',
          preserveReturn: true
        }
      }
    },
    rules: [
      // Public routes
      { pattern: '/', auth: { requirement: 'public' } },
      { pattern: '/login', auth: { requirement: 'public' } },
      { pattern: '/signup', auth: { requirement: 'public' } }
    ]
  }
}
```

### Admin-Only Section

```yaml
# pages/admin/dashboard/page.yaml
route:
  path: /admin/dashboard
  auth:
    requirement: required
    methods: [cookie, bearer]
    roles: [admin]
    onFailure:
      action: page
      page: error-403
```

### API with Rate Limiting

```yaml
# members/public-api.yaml
route:
  path: /api/public/search
  auth:
    requirement: public
    rateLimit:
      requests: 1000
      window: 3600  # 1 hour
      keyBy: ip
```

### Webhook with Signature Verification

```yaml
# members/stripe-webhook.yaml
route:
  path: /webhooks/stripe
  methods: [POST]
  auth:
    requirement: required
    methods: [custom]
    customValidator: stripe
```

Configure in `conductor.config.ts`:
```typescript
routing: {
  auth: {
    customValidators: {
      stripe: {
        type: 'stripe',
        secretEnvVar: 'STRIPE_WEBHOOK_SECRET',
        tolerance: 300
      }
    }
  }
}
```

## Next Steps

<CardGroup cols={2}>
  <Card title="Authentication Guide" icon="lock" href="/conductor/routing/authentication">
    Deep dive into all authentication methods
  </Card>
  <Card title="Routing Overview" icon="route" href="/conductor/routing/overview">
    Learn about the UnifiedRouter
  </Card>
  <Card title="Core Concepts" icon="book" href="/conductor/concepts/ensembles">
    Learn about ensembles and members
  </Card>
  <Card title="Examples" icon="code" href="/conductor/examples/overview">
    See complete examples
  </Card>
</CardGroup>
